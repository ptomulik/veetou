Karta Osiągnięć (KO) - Table Views
----------------------------------

The following views (except **ko_full**) are generated by
`share/veetou/sql/ko/ko_views.sql <../share/veetou/sql/ko/ko_views.sql>`_.

ko_full
```````

This is full view as generated by **veetou**. It presents data from all the
input tables (**ko_trs**, **ko_tbodies**, **ko_page**, **ko_sheets**,
**ko_reports**, **ko_preambles**, **ko_headers**, **ko_footers**). This view
is used as "input" for another, mostly used, view named **ko_refined**.

----

Pełny widok wygenerowany automatycznie przez program **veetou**. Zawiera
wszystkie dane wybrane z wczytanych raportów **KO**. Kolumny reprezentują
informacje znalezione w poszczególnych sekcjach strony raportu takich jak
nagłówek, preambuła, tabela, wiersz tabeli, podsumowanie arkusza, stopka. Taki
układ danych jest jeszcze niezbyt przydatny do obróbki przez człowieka,
więc zdefiniowane są kolejne widoki przedstawione poniżej.

----

ko_refined
``````````
This is another joined view derived from **ko_full**. Reduntant information
(that is repeated in some columns of **ko_full**) is eliminated and column
names are more user-friendly. Anyway, view this still contains all the relevant
data extracted from **KO** reports.

----

Inny widok, zawierający większość danych z widoku **ko_full**. Tutaj
zredukowano informacje powtarzające się w niektórych kolumnach widoku
**ko_full**, pominięto dane, które uznano za mało istotne dla dalszego
przetwarzania (jak np. paginacja, czy nazwa programu, który wygenerował raport)
a kolumnom nadano nazwy przyjaźniejsze dla użytkownika.

----

ko_students
```````````

This is a simple list of students found in the converted **KO** reports. Some
columns may need explanation:

- **records_count** - total number of records (table rows) for the given
  student in all the imported reports; if for example there are two sheets for
  a student "John Smith", one consisting of **10**  rows (with subject grades)
  and other consisting of **5** rows, then **records_count == 15**

----

Lista studentów występujących we wczytanych raportach **KO**. Niektóre kolumny:

- **records_count** - mówi ile wierszy w tabelach wczytanych raportów
  poświęconych jest danemu studentowi; jeśli np. dla studenta "Jak Kowalski"
  występują dwa arkusze kart osiągnięć, na jednym jest **10** pozycji
  (przedmiotów) a na drugim **5** to **records_count == 15**

----

ko_specialties_per_student
``````````````````````````

Columns of the view:

- **studies_specialties_count** - a number in this column tells us how many
  distinct specialties are found (from **KO** reports) to be studied by a given
  student; note, that the term "specialty" here means a concatenation of
  **faculty**, **studies_modetier**, **studies_field**, **studies_specialty**;
  examples of specialties taken as distinct are presented in the table
  `Distinct specialties`_ below,
- **studies_specialty_codes** - a list of different specialty codes guessed
  from USOS dictionaries that, we think, match the "specialties" counted in
  **studies_specialities_count**,
- **studies_specialty_codes_count** - number of specialty codes in
  **studies_specialty_codes**.

----

Kolumny widoku:

- **studies_specialties_count** - liczba w tej kolumnie mówi ile różnych
  "specjalności", wg zapisów w raportach **KO**, studiował do tej pory dany
  student; znaczenie słowa "specjalność" obejmuje w tym przypadku połączenie
  wartości **faculty** (wydział), **studies_modetier** (tryb i rodzaj studiów),
  **studies_field** (kierunek studiów), **studies_specialty** (specjalność w
  obrębie wydziału i kierunku studiów); przykłady wpisów traktowanych jako
  różne "specjalności" przedstawia poniższa tabela `Distinct specialties`_,
- **studies_specialty_codes** - lista kodów specjalności dobranych ze
  słowników USOS, takich które naszym zdaniem odpowiadają specjalnościom
  studiowanym przez danego studenta (czyli tym specjalnościom, które zliczamy
  w kolumnie **studies_specialities_count**),
- **studies_specialty_codes_count** - liczba kodów specjalności wylistowanych
  w kolumnie **studies_specialty_codes**.

----

.. _Distinct specialties:

Distinct specialties

+---------+------------------------------------------+-----------------------+----------------------+
| faculty |             studies_modetier             |      studies_field    |   studies_specialty  |
+=========+==========================================+=======================+======================+
| MEiL    | Magisterskie II st., Dzienne, Polskie    | Automatyka i Robotyka |       Robotyka       |
+---------+------------------------------------------+-----------------------+----------------------+
| MEiL    | Magisterskie II st., Dzienne, Polskie    | Automatyka i Robotyka |      Biorobotyka     |
+---------+------------------------------------------+-----------------------+----------------------+
| MEiL    | Magisterskie jednolite, Dzienne, Polskie | Automatyka i Robotyka |       Robotyka       |
+---------+------------------------------------------+-----------------------+----------------------+
| EiTI    | Magisterskie II st., Dzienne, Polskie    | Automatyka i Robotyka |       Robotyka       |
+---------+------------------------------------------+-----------------------+----------------------+

----

ko_programs_per_student
```````````````````````

Columns of the view:

- **studies_programs_count** - a number in this column tells us how many
  distinct "programs" were found (from **KO** reports) to be studied by a given
  student; note that the term "program" here means a concatenation of
  **faculty**, **studies_modetier**, and **studies_field**; examples of tuples
  taken as distinct programs are presented in table `Distinct programs`_ below
- **studies_program_codes** - a list of different program codes from table
  **ko_studies_program_codes** that match the "programs" accounted in
  **studies_programs_count**,
- **studies_program_codes_count** - number of program codes in the
  **studies_program_codes** list.

----

Kolumny widoku:

- **studies_programs_count** - liczba w tej kolumnie mówi nam na ilu różnych
  "programach" (jak to wynika z raportów **KO**) studiował dany student;
  pod pojęciem "program" rozumiemy tutaj zestawienie wartości **faculty**
  (wydział), **studies_modetier** (tryb i rodzaj studiów), **studies_field**
  (kierunek studiów); przykłady kombinacji traktowanych jako różne "programy"
  pokazano w tabeli `Distinct programs`_ poniżej,
- **studies_program_codes** - lista kodów programów z tabeli
  **ko_studies_program_codes** które odpowiadają "programom" uwzględnionym w
  kolumnie **studies_programs_count**,
- **studies_program_codes_count** - liczba kodów programów na liście
  **studies_program_codes**.

----

.. _Distinct programs:

Distinct programs

+---------+------------------------------------------+-----------------------+
| faculty |             studies_modetier             |      studies_field    |
+=========+==========================================+=======================+
| MEiL    | Magisterskie II st., Dzienne, Polskie    | Automatyka i Robotyka |
+---------+------------------------------------------+-----------------------+
| MEiL    | Magisterskie II st., Dzienne, Polskie    |       Energetyka      |
+---------+------------------------------------------+-----------------------+
| MEiL    | Magisterskie jednolite, Dzienne, Polskie | Automatyka i Robotyka |
+---------+------------------------------------------+-----------------------+
| EiTI    | Magisterskie II st., Dzienne, Polskie    | Automatyka i Robotyka |
+---------+------------------------------------------+-----------------------+

ko_program_codes_per_student_specialty
``````````````````````````````````````

View columns:

- **studies_program_codes** - a list of program codes from
  **ko_studies_program_codes** that match "specialty" studied by a student,
- **studies_program_codes_count** - number of elements in
  **studies_program_codes**.

----

Kolumny widoku:

- **studies_program_codes** - lista kodów programów studiów dobranych z
  tabeli **ko_studies_program_codes** wg dopasowania do "specjalności"
  studiowanej przez studenta,
- **studies_program_codes_count** - liczba kodów wymienionych w kolumnie
  **studies_program_codes**.

----

ko_semesters_per_student_specialty
``````````````````````````````````

View columns:

- **studies_specialities_count** - the same as in the view named
  **ko_specialties_per_student**,
- **semester_codes** - this list tells us on what academic semesters the
  student studied given "specialty" according to **KO** reports,
- **semester_numbers** - this list tells us what were the stutent's semester
  numbers when (s)he studied given "specialty",
- **semester_codes_count** - the number of semester codes listed in the column
  **semester_codes**.

----

Kolumny widoku:

- **studies_specialities_count** - to samo co w widoku
  **ko_specialties_per_student**,
- **semester_codes** - lista semestrów akademickich, na których, wg raportów
  **KO**, student studiował daną "specialność",
- **semester_numbers** - lista numerów semestrów studiów danego studenta, które
  zaliczone były, wg raportów **KO** na danej specjalności,
- **semester_codes_count** - liczba kodów wylistowanych w kolumnie
  **semester_codes**.

----


ko_student_programs
```````````````````

This is merely same as **ko_programs_per_student**, except rows are repeated
for students which studied different programs. The extra columns **faculty**,
**studies_modetier**, and **studies_field** may be used to see differences
between student's programs.

----

W gruncie rzeczy widok podobny do **ko_programs_per_student**, jednak tutaj
mamy dodatkowe kolumny **faculty**, **studies_modetier** i **studies_field**.
Jeśli dany student występuje na raportach **KO** pod kilkoma "programami"
studiów (wydział, tryb+rodzaj, kierunek), to w widoku wystąpi kilka wierszy
z tym samym numerem indeksu, ale różniących się wartościami w kolumnach
**faculty**, **studies_modetier**, lub **studies_field**. Liczba powtórzonych
wierszy jest równoznaczna liczbie "programów" na których pojawiał się student i
jest umieszczona w kolumnie **studies_programs_count**.

----

ko_student_specialties
```````````````````

This is merely same as **ko_specialties_per_student**, except rows are repeated
for students which studied different specialties. The extra columns **faculty**,
**studies_modetier**, **studies_field**, and **studies_specialty** may be used
to see differences between student's specialties.

----

W gruncie rzeczy widok podobny do **ko_specialties_per_student**, jednak tutaj
mamy dodatkowe kolumny **faculty**, **studies_modetier**, **studies_field**
i **studies_specialty**. Jeśli dany student występuje na raportach **KO** pod
kilkoma "specjalnościami" (wydział, tryb+rodzaj, kierunek, specjalność), to w
widoku wystąpi kilka wierszy z tym samym numerem indeksu, ale różniących się
wartościami w kolumnach **faculty**, **studies_modetier**, **studies_field**
lub **studies_specialty**. Liczba powtórzonych wierszy jest równoznaczna
liczbie "specjalności" na których pojawiał się student i jest umieszczona w
kolumnie **studies_specialties_count**.

----

ko_programs_per_tr
``````````````````

This is similar to **ko_programs_per_student** but the number of programs apply
to particular table row from **KO** reports. If it happens, that the column
**studies_programs_count** has value other than ``1``, then something really
weird must happened.

More interesting may be the column named **studies_program_codes** and
**studies_program_codes_count**. They help to indicate situations where
a single report table row falls into multiple study programs due to ambiguous
mapping from program names found on **KO** report to program codes.

----

Widok ideowo odpowiadający widokowi **ko_programs_per_student** z tą różnicą,
że tutaj sprawdzamy liczbę różnych programów, w które wpada dany wiersz tabeli
z raportu **KO**. Ta liczba (w kolumnie **studies_programs_count**) powinna
w zasadzie być zawsze równa ``1`` jako, że określony wiersz może występować
tylko i wyłącznie na jednym arkuszu **KO** (a "program" jest przypisany
do arkusza **KO**). Jeśli jest inna wartość niż ``1`` to znaczy, że naprawdę
coś dziwnego się stało i trzeba przejrzeć naszą machinerię.

Bardziej interesujące mogą być kolumny **studies_program_codes** and
**studies_program_codes_count**. Pozwalają one wyłapać przypadki, gdzie
pojedynczemu wierszowi tabeli z raportu **KO** możliwe jest przypisanie
jednego z kilku kodów programów studiów z powodu niejednoznacznego odwzorowania
nazw programów (występujących na raportach **KO**) na kody programów
(zdefiniowane w modelu studiów - tabela **ko_studies_program_codes**).

usos_progs_id_per_ko_tr
```````````````````````

This table view indicates how many distinct records of the "all usos students
on programs" (**usos_allstudents** table) match given table row from **KO**
report. The most interesing columns are **usos_progs_ids** and
**usos_progs_ids_count**.

----

Ten widok pokazuje ile różnych rekordów z tabeli **usos_allstudents** pasuje do
danego wiersza z raportu **KO** (z widoku **ko_refined**). Najbardziej
interesujące kolumny to **usos_progs_ids** oraz **usos_progs_ids_count**.

ko_tr_usos_allstudents
``````````````````````

This is the final outcome, where rows of **KO** reports are matched to records
of the **usos_allstudents** table. Repetitions are possible for **KO** rows
that somehow match multiple records of **usos_allstudents**. We provide
additional columns to deal with this problem:

- **usos_progs_ids_count** - to catch up non-matching **KO** rows (``=0``) or
  ambiguous matches (``>1``),
- **ko_semester_code_le_max_cdyd** - to indicate condition that
  ``ko_semester_code <= usos_max_cdyd`` (comparing semester code extracted from
  **KO** to max possible semester for given program instance as defined by
  **usos_allstudents**).
- **ko_semester_start_date_ge_admission_date** - to indicate condition that
  ``ko_semester_start_date >= usos_admission_date`` (comparing semester start
  date to student's admission date),
- **ko_semester_end_date_le_discontinuation_or_dissertation_date** - to
  indicate condition that ``ko_semester_end_date <= usos_discontinuation_date`` or
  ``ko_semester_end_date <= usos_dissertation_date`` (comparing semester end
  date to the date where studies were finished),
